<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
 <title>TieBot</title>
<script src="static/home.js"></script> 
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
function showField(){
document.getElementById("textbox").value='';
document.getElementById("happy").style.display = "none";
var x = document.getElementById("provideFeedback");
x.style.display = "block";
}

function happy(){
document.getElementById("provideFeedback").style.display = "none";
var x = document.getElementById("happy");
x.style.display = "block";
}
</script>
<script>
  function startDictation() {

    if (window.hasOwnProperty('webkitSpeechRecognition')) {

      var recognition = new webkitSpeechRecognition();

      recognition.continuous = false;
      recognition.interimResults = false;

      recognition.lang = "en-US";
      recognition.start();

      recognition.onresult = function(e) {
        document.getElementById('chatbox').value
                                 = e.results[0][0].transcript;
	var e= $.Event("keypress", {which:13});
	$("#chatbox").trigger(e);
        recognition.stop();
     
      };

      recognition.onerror = function(e) {
        recognition.stop();
      }

    }
  }
</script>


<link rel="stylesheet" type="text/css"href="static/home.css">
<style>
  #chatbox img {float: right; width: 40px; box-shadow: 5px 5px 5px grey;}
</style>
</head>
<body>


<div id='bodybox'> <img src="/static/images/LandisGyr.jpg"  style="float:right" height="60" width="80">
  <div id='chatborder'>
    <p id="chatlog7"  class="chatlog">&nbsp;&nbsp;</p>
    <p id="chatlog6"  class="chatlog">&nbsp;&nbsp;</p>
    <p id="chatlog5"  class="chatlog">&nbsp;&nbsp;</p>
    <p id="chatlog4"  class="chatlog">&nbsp;&nbsp;</p>
    <p id="chatlog3"  class="chatlog">&nbsp;&nbsp;</p>
    <p id="chatlog2"  class="chatlog">&nbsp;&nbsp;</p>
    <p id="chatlog1"  class="chatlog">&nbsp;&nbsp;</p>
<div class="speech">
   <input style="background-color: #b1f6de" type="text" name="chat" id="chatbox" placeholder="Hi there! Type here to talk to me." onfocus="placeHolder()">
   <img onclick="startDictation()" src="/static/images/mic2.jpeg"  style="float:right; " height="30" width="30"></input>
</div>
  </div>
  <br>
  <br>
 </div>
<br>
<div id="feedback">
Was this helpful?
<button onclick="happy()" style="box-shadow: 3px 3px 3px grey;border-radius: 10px;border: 2px solid black;background-color: #b1f6de">Yes</button>
<button onclick="showField()" style="box-shadow: 3px 3px 3px grey;border-radius: 10px;border: 2px solid black;background-color: #b1f6de">No</button><br><br>
<div style= "display:none" id="provideFeedback">

Please provide your feedback:-<br>
<input  id="textbox" type="textedit"></input>
<button onclick="send_feedback()" style="box-shadow: 3px 3px 3px grey;border-radius: 10px;border: 2px solid black;background-color: #b1f6de">Submit</button>
</div>

<div style= "display:none" id="happy">
<p>Great! Thank you! </p>
</div>
</div>



 </body>
 </html>
